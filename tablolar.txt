use eczane;
go
create table eczane_sistemi(
eczaneID int primary key,
eczaneAdi varchar(50),
tel varchar(50),
adres varchar(50));

create table kategoriler(
kategoriID int primary key, 
kategoriAd varchar(50));

create table hasta(
hastaID int primary key,
kimlik_numarası varchar(11),
hastaAd varchar(50),
hastasoyad varchar(50),
tel varchar(50));

create table doktor(
doktorID int primary key,
doktorad varchar(50),
doktorsoyad varchar(50),
uzmanlık_alanı varchar(50));


create table ilac(
ilacID int primary key,
ilacAdi varchar(50),
barkod varchar(50),
kategoriID int,
birim_fiyat decimal(18,2),
KDV_oranı decimal (18,2),
tarih datetime2,
CONSTRAINT FK_ilac_kategori FOREIGN KEY (kategoriID) REFERENCES kategoriler(kategoriID));

create table reçete(
reçeteID int primary key,
hastaID int,
doktorID int,
reçete_tarihi datetime2,
CONSTRAINT FK_reçete_hasta FOREIGN KEY (hastaID) REFERENCES hasta(hastaID),
CONSTRAINT FK_reçete_doktor FOREIGN KEY (doktorID) REFERENCES doktor(doktorID));

create table reçete_detay(
detay_ID int primary key,
reçeteID int,
ilacID int,
adet int,
kullanım_şekli varchar(50),
CONSTRAINT FK_detay_reçete FOREIGN KEY (reçeteID) REFERENCES reçete(reçeteID),
CONSTRAINT FK_detay_ilac FOREIGN KEY (ilacID) REFERENCES ilac(ilacID));

create table stok_hareket(
stokID int primary key,
eczaneID int,
ilacID int,
adet int,
işlem_tarihi date,
son_kullanma_tarihi date,
CONSTRAINT FK_stok_eczane FOREIGN KEY (eczaneID) REFERENCES eczane_sistemi(eczaneID),
CONSTRAINT FK_stok_ilac FOREIGN KEY (ilacID) REFERENCES ilac(ilacID));

create table  satıslar(
satısID int primary key,
reçeteID int,
toplam_tutar decimal(18,2),
satıs_tarihi datetime2,
CONSTRAINT FK_satıslar_reçete FOREIGN KEY (reçeteID) REFERENCES reçete(reçeteID));




